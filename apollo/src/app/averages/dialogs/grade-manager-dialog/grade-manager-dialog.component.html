<div class="grade-manager-dialog-container">
   <h2>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TITLE" | transloco }}</h2>
   <div class="actions">
      <mat-form-field>
         <mat-label>{{ "AVERAGES.YEAR_SELECTION_LABEL" | transloco }}</mat-label>
         <mat-select [value]="selectedYear()" (valueChange)="selectYear($event)">
            @for(year of years(); track year.name) {
               <mat-option [value]="year">{{ year.name }}</mat-option>
            }
         </mat-select>
      </mat-form-field>
      <button mat-raised-button
         color="primary"
         (click)="addYear()">{{ "AVERAGES.GRADE_MANAGER_DIALOG.YEAR_ADD_LABEL" | transloco }}</button>
   </div>
   <div class="semester-tables">
      <div class="semester-table-container">
         <div class="mat-mdc-table">
            <div class="semester-table-header mat-mdc-table-row mat-mdc-header-cell">{{ "AVERAGES.YEAR_AVERAGES.FIRST_SEMESTER.LABEL" | transloco }}</div>
         </div>
         <table mat-table [dataSource]="selectedYear()!.firstSemesterGrades">
            <ng-container matColumnDef="name">
               <th mat-header-cell *matHeaderCellDef>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TABLE_HEADERS.NAME" | transloco }}</th>
               <td mat-cell *matCellDef="let idx = index">
                  <input class="table-cell-input"
                     [(ngModel)]="selectedYear()!.firstSemesterGrades[idx].name">
               </td>
            </ng-container>
            <ng-container matColumnDef="rating">
               <th mat-header-cell *matHeaderCellDef>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TABLE_HEADERS.RATING" | transloco }}</th>
               <td mat-cell *matCellDef="let idx = index">
                  <input class="table-cell-input"
                     [(ngModel)]="selectedYear()!.firstSemesterGrades[idx].rating">
               </td>
            </ng-container>
            <ng-container matColumnDef="credit">
               <th mat-header-cell *matHeaderCellDef>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TABLE_HEADERS.CREDIT" | transloco }}</th>
               <td mat-cell *matCellDef="let idx = index">
                  <input class="table-cell-input"
                     [(ngModel)]="selectedYear()!.firstSemesterGrades[idx].credit">
               </td>
            </ng-container>
            <ng-container matColumnDef="remove">
               <th mat-header-cell *matHeaderCellDef></th>
               <td mat-cell *matCellDef="let idx = index">
                  <button mat-raised-button
                     color="warn"
                     (click)="removeGrade(selectedYear()!.firstSemesterGrades, idx)">{{ "AVERAGES.GRADE_MANAGER_DIALOG.GRADE_REMOVE_LABEL" | transloco }}</button>
               </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
         </table>
         <div class="mat-mdc-table">
            <div class="semester-table-footer">
               <button mat-raised-button
                  color="accent"
                  (click)="addGrade(selectedYear()!.firstSemesterGrades)">{{ "AVERAGES.GRADE_MANAGER_DIALOG.GRADE_ADD_LABEL" | transloco }}</button>
            </div>
         </div>
      </div>
      <div class="semester-table-container">
         <div class="mat-mdc-table">
            <div class="semester-table-header mat-mdc-table-row mat-mdc-header-cell">{{ "AVERAGES.YEAR_AVERAGES.SECOND_SEMESTER.LABEL" | transloco }}</div>
         </div>
         <table mat-table [dataSource]="selectedYear()!.secondSemesterGrades">
            <ng-container matColumnDef="name">
               <th mat-header-cell *matHeaderCellDef>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TABLE_HEADERS.NAME" | transloco }}</th>
               <td mat-cell *matCellDef="let idx = index">
                  <input class="table-cell-input"
                     [(ngModel)]="selectedYear()!.secondSemesterGrades[idx].name">
               </td>
            </ng-container>
            <ng-container matColumnDef="rating">
               <th mat-header-cell *matHeaderCellDef>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TABLE_HEADERS.RATING" | transloco }}</th>
               <td mat-cell *matCellDef="let idx = index">
                  <input class="table-cell-input"
                     [(ngModel)]="selectedYear()!.secondSemesterGrades[idx].rating">
               </td>
            </ng-container>
            <ng-container matColumnDef="credit">
               <th mat-header-cell *matHeaderCellDef>{{ "AVERAGES.GRADE_MANAGER_DIALOG.TABLE_HEADERS.CREDIT" | transloco }}</th>
               <td mat-cell *matCellDef="let idx = index">
                  <input class="table-cell-input"
                     [(ngModel)]="selectedYear()!.secondSemesterGrades[idx].credit">
               </td>
            </ng-container>
            <ng-container matColumnDef="remove">
               <th mat-header-cell *matHeaderCellDef></th>
               <td mat-cell *matCellDef="let idx = index">
                  <button mat-raised-button
                     color="warn"
                     (click)="removeGrade(selectedYear()!.secondSemesterGrades, idx)">{{ "AVERAGES.GRADE_MANAGER_DIALOG.GRADE_REMOVE_LABEL" | transloco }}</button>
               </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
         </table>
         <div class="mat-mdc-table">
            <div class="semester-table-footer">
               <button mat-raised-button
                  color="accent"
                  (click)="addGrade(selectedYear()!.secondSemesterGrades)">{{ "AVERAGES.GRADE_MANAGER_DIALOG.GRADE_ADD_LABEL" | transloco }}</button>
            </div>
         </div>
      </div>
   </div>
   <button mat-raised-button
      color="primary"
      (click)="save()">{{ "AVERAGES.GRADE_MANAGER_DIALOG.SAVE_LABEL" | transloco }}</button>
</div>
